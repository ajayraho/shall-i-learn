$(window).ready(function(){console.log("%c \u{1F64C} Shall I Learn","font-weight:bold; font-size:45px;color:#6266ea;"),console.log("%c\nAuthor: Ajit Kumar\nShall I Learn is a platform which shows the popularity, recent trends of the desired programming technology and the number of jobs in the current market from well known and renowed sources on the internet.","font-style:italic; font-size:14px;");let f=document.querySelector("#silInput"),b=document.querySelector("#silSubmit"),c=document.querySelector("#silForm"),g=document.getElementById("chart_div"),h=document.getElementById("region_chart_div"),i=document.getElementById("git_repos"),j=document.getElementById("git_topics"),k=document.getElementById("stackoverflowQuestions_div"),l=document.getElementById("reddit_div"),m=document.getElementById("linkedinjobs_div"),n=document.getElementById("flexjobs_div"),o=document.getElementById("indeed_div"),p=document.getElementById("tags_chart_div"),q=document.getElementById("tags_legends"),r=document.getElementById("timeDistribution_div"),s=document.getElementById("SILBody"),t=document.getElementById("linkedinnew_div");document.getElementById("mostUsedTagsDIV");let u=document.getElementById("timeDistQuestionCount"),v=document.getElementById("logsModal"),w=0,x=!1,y=a=>(w++,"<abbr onclick='alert(\"Error: "+a.replace(/['"<>/\\]+/g,"")+'")\' title="Error: '+a.replace(/['"]+/g,"")+'"><i class=\'bx bx-error-circle\' style="font-size:4rem;color:red;"></i></abbr>'),z=()=>{x=!1;let a='<div class="lcon"><div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div></div>';g.innerHTML=a,h.innerHTML=a,i.innerHTML=a,j.innerHTML=a,k.innerHTML=a,l.innerHTML=a,m.innerHTML=a,t.innerHTML=a,o.innerHTML=a,n.innerHTML=a,p.innerHTML=a,r.innerHTML=a},d=a=>{A(a+"<br/>"),x||($("#waitingBox").animate({opacity:0},500).css("display","none"),$("#SILBody").children().fadeOut(500).promise().done(function(){$("#errorBox #errTxt").html(a),$("#errorBox").css("display","flex"),jQuery.easing.def="easeOutBounce",$("#errorBox").animate({opacity:1},500),$(b).attr("disabled","true"),$("#silInput").attr("value","Reload page :)").attr("disabled","true")}),x=!0)},A=a=>{void 0!=a?v.innerHTML+=a:v.innerHTML+="Something unexpected happened.<br/>",v.scrollTop=v.scrollHeight},a=function(a){a.preventDefault(),$("#waitingBox").css("display","flex").animate({opacity:1},750),$("#technicalTermBox").css({display:"none",opacity:0});var c=!1;if(v.innerHTML="Welcome to shallILearn<br/>",$(".logButton").css("display","inline-block").click(function(){$(this).toggleClass("logButtonActive"),c?$(".logsModal").animate({opacity:0},250).css("display","none"):$(".logsModal").css("display","inline-block").animate({opacity:1},250),c=!c}),""!=f.value.trim()&&"easteregg"!=f.value.trim()){z(),s.style.display="block",window.scrollTo(0,450);let b="https://shallilearn.herokuapp.com/sil/",e=b,B={Accept:"application/json, text/plain, */*","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},C=JSON.stringify({query:f.value});google.charts.load("current",{packages:["corechart","geochart"]}),google.charts.setOnLoadCallback(async()=>{await fetch(e+"googleTrends",{method:"POST",headers:B,body:C}).then(async a=>{if(!a.ok)throw new Error(a.statusText);var b,c,d,e,f,i=await a.json();d=i.GTPTime.map(a=>[new Date(new Date(a[0]).toDateString()),a[1],]),e=google.visualization.arrayToDataTable([["Day","Interest"],...d]),f={curveType:"function",hAxis:{format:"yyyy"},legend:{position:"none"},animation:{startup:!0,duration:750,easing:"out"},height:250,chartArea:{width:"90%",height:"90%"}},new google.visualization.LineChart(g).draw(e,f),b=google.visualization.arrayToDataTable([["Country","Popularity"],...i.GTPRegn,]),c={width:400,height:300},new google.visualization.GeoChart(h).draw(b,c)}).catch(a=>{d(a)}),x||await fetch(e+"gitHub",{method:"POST",headers:B,body:C}).then(async b=>{if(!b.ok)throw new Error(b.statusText);var a=await b.json();A(a.logs),i.innerHTML=a.hasOwnProperty("gitReposError")?y(a.gitReposError):"<abbr title='"+a.repos+"'>"+SILUtilAbbreviate(a.repos)+"</abbr>",j.innerHTML=a.hasOwnProperty("gitTopicsError")?y(a.gitTopicsError):"<abbr title='"+a.topics+"'>"+SILUtilAbbreviate(a.topics)+"</abbr>"}).catch(a=>{x||d(a)}),x||await fetch(e+"reddit",{method:"POST",headers:B,body:C}).then(async b=>{if(!b.ok)throw new Error(b.statusText);var a=await b.json();if(A(a.logs),a.hasOwnProperty("redditError"))l.innerHTML="<div class='d-flex align-items-center justify-content-center'>"+y(a.redditError)+"</div>";else{var e="";for(let c=0;c<a.communities.length;c++){var d=a.communities[c];e+="<tr><td style='width:50%'><a target='_blank' href='https://www.reddit.com"+d[2]+"'>"+d[0]+"</a></td><td>"+d[1]+"</td></tr>"}l.innerHTML=e}}).catch(a=>{x||d(a)}),x||await fetch(e+"linkedin",{method:"POST",headers:B,body:C}).then(async b=>{if(!b.ok)throw new Error(b.statusText);var a=await b.json();A(a.logs),m.innerHTML=a.hasOwnProperty("linkedinError")?y(a.linkedinError):"<abbr title='"+a.liJobs+"'>"+SILUtilAbbreviate(a.liJobs)+"</abbr>",t.innerHTML=a.hasOwnProperty("linkedinError")?y(a.linkedinError):"<abbr title='"+a.liNewJobs+"'>"+SILUtilAbbreviate(a.liNewJobs)+"</abbr>"}).catch(a=>{x||d(a)}),x||await fetch(e+"miscjobs",{method:"POST",headers:B,body:C}).then(async b=>{if(!b.ok)throw new Error(b.statusText);var a=await b.json();A(a.logs),o.innerHTML=a.hasOwnProperty("indeedJobsError")?y(a.indeedJobsError):"<abbr title='"+a.indeedJobs+"'>"+SILUtilAbbreviate(a.indeedJobs)+"</abbr>",n.innerHTML=a.hasOwnProperty("flexJobsError")?y(a.flexJobsError):"<abbr title='"+a.flexJobs+"'>"+SILUtilAbbreviate(a.flexJobs)+"</abbr>"}).catch(a=>{x||d(a)}),x||await fetch(e+"stackoverflow",{method:"POST",headers:B,body:C}).then(async c=>{if($("#waitingBox").animate({opacity:0},500).css("display","none"),!c.ok)throw new Error(c.statusText);var d,e,a=await c.json();A(a.logs),k.innerHTML="<abbr title='"+a.questionsCount+"'>"+SILUtilAbbreviate(a.questionsCount)+"</abbr>";let g=["#3464c3","#dc3912","#fb9b05","#14941c","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395"],h=()=>{for(var b={},a=0;a<10;a++)b[a]={color:g[a]};return b};d=google.visualization.arrayToDataTable([["Tag","Use"],...a.tags]),e={width:250,height:250,is3d:!0,pieHole:.4,legend:{position:"none"},chartArea:{width:"75%",height:"75%"},animation:{startup:!0,duration:750,easing:"out"},slices:h()},new google.visualization.PieChart(p).draw(d,e),function(){if(a.hasOwnProperty("stackoverflowTagTimeError"))$(r).html(y(a.stackoverflowTagTimeError));else{u.innerHTML="first "+SILUtilAbbreviate(50*parseInt(a.qpages))+" questions";var b=Object.keys(a.timeDistribution).map(b=>[b,a.timeDistribution[b]]);if(0==(b=[["Minutes",parseInt(b[0][1])],["Hours",parseInt(b[1][1])],["Days",parseInt(b[2][1])],["Months",parseInt(b[3][1])],["Years",parseInt(b[4][1])]])[0][1]&&0==b[1][1]&&0==b[2][1]&&0==b[3][1]&&0==b[4][1]){$(r).html("<div style='text-align:center;'>"+y("No tags to show")+"</div>");return}for(var d=[],c=0;c<b.length;c++)0!=b[c][1]&&d.push(b[c]);var e=google.visualization.arrayToDataTable([["Time","Questions asked"],...d]),f={width:300,height:300,legend:{position:"none"},chartArea:{width:"80%",height:"80%"},animation:{startup:!0,duration:750,easing:"out"}};new google.visualization.ColumnChart(r).draw(e,f)}}();var f="";for(let b=0;b<a.tags.length;b++)f+='<tr><td style="width:12px;padding:4px;"><div style="background-color:'+g[b]+';width:10px;height:10px;border-radius:50%;margin-left:auto;"></div></td><td style="padding-top:4px;padding-bottom:4px;padding-right:4px;">'+a.tags[b][0]+"</td></tr>";q.innerHTML=f,w>=3&&$("#technicalTermBox").css("display","flex").animate({opacity:1},750)}).catch(a=>{x||d(a)})})}else"easteregg"==f.value?(s.style.display="block",window.scrollTo(0,450),d("Congratulations! You found an easter egg ;)")):(f.style.border="1px solid red",setTimeout(()=>{f.style.border="1px solid #ced4da"},1e3))};try{b.onclick=a,c.onsubmit=a}catch(e){d(e)}})